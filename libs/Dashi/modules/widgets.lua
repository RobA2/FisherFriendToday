local a,b=...function b:CreateFrame(...)return Mixin(CreateFrame(...),b.eventMixin)end;local c='ActionButtonUseKeyDown'local function d(self)if C_CVar.GetCVarBool(c)then self:RegisterForClicks('AnyDown')else self:RegisterForClicks('AnyUp')end end;local function e(self,f)if f==c then b:Defer(d,self)end end;function b:CreateButton(...)local g=b:CreateFrame(...)g:RegisterEvent('CVAR_UPDATE',e)e(g,c)return g end;do local function h(i,j)return tostring(i)>tostring(j)end;local function k(l)if l._provider then return end;local m=CreateDataProvider()m:SetSortComparator(l._sort or h,true)local n;if l.kind=='list'then n=CreateScrollBoxListLinearView(l._insetTop,l._insetBottom,l._insetLeft,l._insetRight,l._spacingHorizontal)elseif l.kind=='grid'then local o=l:GetWidth()-l.bar:GetWidth()-(l._insetLeft or 0)-(l._insetRight or 0)local p=math.floor((o-(l._spacingHorizontal or 0))/(l._elementWidth+(l._spacingHorizontal or 0)))n=CreateScrollBoxListGridView(p,l._insetTop,l._insetBottom,l._insetLeft,l._insetRight,l._spacingHorizontal,l._spacingVertical)n:SetStrideExtent(l._elementWidth)end;n:SetDataProvider(m)n:SetElementExtent(l._elementHeight)n:SetElementInitializer(l._elementType,function(q,r)if l._elementWidth and l.kind=='grid'then q:SetWidth(l._elementWidth)end;if l._elementHeight then q:SetHeight(l._elementHeight)end;if not q._initialized then q._initialized=true;if l._scripts then for s,t in next,l._scripts do q:SetScript(s,t)if s=='OnEnter'and not l._scripts.OnLeave then q:SetScript('OnLeave',GameTooltip_Hide)end end end;if l._onLoad then local u,v=pcall(l._onLoad,q)if not u then error(v)end end end;q.data=r;if l._onUpdate then local u,v=pcall(l._onUpdate,q,r)if not u then error(v)end end end)ScrollUtil.InitScrollBoxListWithScrollBar(l,l.bar,n)ScrollUtil.AddManagedScrollBarVisibilityBehavior(l,l.bar)l._provider=m end;local w={}function w:SetInsets(x,y,z,A)self._insetTop=x;self._insetBottom=y;self._insetLeft=z;self._insetRight=A end;function w:SetElementType(B)self._elementType=B end;function w:SetElementHeight(C)self._elementHeight=C end;function w:SetElementWidth(o)self._elementWidth=o end;function w:SetElementSize(o,C)self:SetElementWidth(o)self:SetElementHeight(C or o)end;function w:SetElementSpacing(D,E)self._spacingHorizontal=D;self._spacingVertical=E or D end;function w:SetElementSortingMethod(t)self._sort=t end;function w:SetElementOnLoad(t)self._onLoad=t end;function w:SetElementOnScript(s,t)self._scripts=self._scripts or{}self._scripts[s]=t end;function w:SetElementOnUpdate(t)self._onUpdate=t end;function w:AddData(...)k(self)self._provider:Insert(...)end;function w:AddDataByKeys(r)for F,G in next,r do if G then self:AddData(F)end end end;function w:RemoveData(...)self._provider:Remove(...)end;function w:ResetData()self._provider:Flush()end;local function H(I,B)local J=CreateFrame('Frame',nil,I,'WowScrollBoxList')J:SetPoint('TOPLEFT')J:SetPoint('BOTTOMRIGHT',-8,0)J.kind=B;local K=CreateFrame('EventFrame',nil,I,'MinimalScrollBar')K:SetPoint('TOPLEFT',J,'TOPRIGHT')K:SetPoint('BOTTOMLEFT',J,'BOTTOMRIGHT')J.bar=K;return Mixin(J,w)end;function b:CreateScrollList(I)return H(I,'list')end;function b:CreateScrollGrid(I)return H(I,'grid')end end